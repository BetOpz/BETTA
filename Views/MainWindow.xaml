<Window x:Class="BETTA.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:properties="clr-namespace:BETTA.Properties"
        Title="BETTA – Horse-Racing Markets"
        Height="550"
        Width="800"
        WindowStartupLocation="CenterScreen"
        Background="#F8F8F8"
        FontFamily="Segoe UI">

    <Window.Resources>
        <!-- 15 Rotating Colors for Daily Venue Assignment -->
        <SolidColorBrush x:Key="Color0" Color="#E53E3E"/>
        <!-- Red -->
        <SolidColorBrush x:Key="Color1" Color="#DD6B20"/>
        <!-- Orange -->
        <SolidColorBrush x:Key="Color2" Color="#D69E2E"/>
        <!-- Yellow -->
        <SolidColorBrush x:Key="Color3" Color="#38A169"/>
        <!-- Green -->
        <SolidColorBrush x:Key="Color4" Color="#00A3C4"/>
        <!-- Teal -->
        <SolidColorBrush x:Key="Color5" Color="#3182CE"/>
        <!-- Blue -->
        <SolidColorBrush x:Key="Color6" Color="#553C9A"/>
        <!-- Purple -->
        <SolidColorBrush x:Key="Color7" Color="#B83280"/>
        <!-- Pink -->
        <SolidColorBrush x:Key="Color8" Color="#2D3748"/>
        <!-- Dark Grey -->
        <SolidColorBrush x:Key="Color9" Color="#C53030"/>
        <!-- Dark Red -->
        <SolidColorBrush x:Key="Color10" Color="#9C4221"/>
        <!-- Brown -->
        <SolidColorBrush x:Key="Color11" Color="#B7791F"/>
        <!-- Dark Yellow -->
        <SolidColorBrush x:Key="Color12" Color="#2F855A"/>
        <!-- Dark Green -->
        <SolidColorBrush x:Key="Color13" Color="#0987A0"/>
        <!-- Dark Teal -->
        <SolidColorBrush x:Key="Color14" Color="#2A69AC"/>
        <!-- Dark Blue -->
    </Window.Resources>

    <DockPanel>
        <!-- Toolbar -->
        <StackPanel DockPanel.Dock="Top"
                    Orientation="Horizontal"
                    Background="#007ACC"
                    Height="40">
            <Button x:Name="BtnRefresh"
                    Content="Refresh"
                    Click="BtnRefresh_Click"
                    Margin="10,5"
                    Padding="12,4"
                    Background="White"
                    Foreground="#007ACC"/>

            <!-- Current Time Display -->
            <TextBlock x:Name="CurrentTimeDisplay"
                       Foreground="White"
                       FontSize="14"
                       FontWeight="Bold"
                       VerticalAlignment="Center"
                       Margin="20,0,0,0"
                       Text="Loading time..."/>
        </StackPanel>

        <!-- Current Time Bar (larger display) -->
        <Border DockPanel.Dock="Top"
                Background="#F0F0F0"
                BorderThickness="0,0,0,1"
                BorderBrush="#CCC"
                Padding="10,8">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Current UK Time: "
                           FontSize="16"
                           Foreground="#666"/>
                <TextBlock x:Name="CurrentTimeLarge"
                           FontSize="16"
                           FontWeight="Bold"
                           Foreground="#007ACC"
                           Text="Loading..."/>
                <TextBlock x:Name="NextRefreshInfo"
                           FontSize="12"
                           Foreground="#999"
                           Margin="30,0,0,0"
                           Text=""/>
            </StackPanel>
        </Border>

        <!-- Race List as Color-coded Clickable Tabs -->
        <ListBox x:Name="RaceList"
                 Margin="10"
                 Background="Transparent"
                 BorderThickness="0"
                 SelectionChanged="RaceList_SelectionChanged">

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="RaceTab"
                            Margin="2"
                            Padding="12,8"
                            CornerRadius="4"
                            Background="{StaticResource Color0}"
                            Cursor="Hand">

                        <StackPanel>
                            <TextBlock Text="{Binding race_info_with_status}"
                                       Foreground="White"
                                       FontWeight="SemiBold"
                                       FontSize="14"/>
                            <TextBlock x:Name="TimeToStart"
                                       Foreground="White"
                                       FontSize="10"
                                       Opacity="0.8"
                                       Margin="0,2,0,0"/>
                        </StackPanel>
                    </Border>

                    <DataTemplate.Triggers>
                        <!-- Rotating color assignment based on color_index -->
                        <DataTrigger Binding="{Binding color_index}" Value="0">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color0}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="1">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color1}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="2">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color2}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="3">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color3}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="4">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color4}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="5">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color5}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="6">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color6}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="7">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color7}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="8">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color8}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="9">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color9}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="10">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color10}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="11">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color11}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="12">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color12}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="13">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color13}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding color_index}" Value="14">
                            <Setter TargetName="RaceTab" Property="Background" Value="{StaticResource Color14}"/>
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </ListBox.ItemTemplate>

            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="2"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ListBoxItem">
                                <Border x:Name="SelectionBorder"
                                        Background="Transparent"
                                        BorderBrush="Transparent"
                                        BorderThickness="0"
                                        CornerRadius="4">
                                    <ContentPresenter/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="SelectionBorder" Property="BorderBrush" Value="#000000"/>
                                        <Setter TargetName="SelectionBorder" Property="BorderThickness" Value="4"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="SelectionBorder" Property="BorderBrush" Value="#444444"/>
                                        <Setter TargetName="SelectionBorder" Property="BorderThickness" Value="2"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ListBox.ItemContainerStyle>

        </ListBox>

        <!-- Status bar -->
        <TextBlock x:Name="StatusText"
                   DockPanel.Dock="Bottom"
                   Margin="10,5"
                   Text="Ready"/>
    </DockPanel>
</Window>
